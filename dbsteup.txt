drop table dvd;
drop table dvd_sprache;
drop table genre;
drop table kunde;
drop table sprache;
drop table dvd_kunde;

create table dvd(
did integer primary key generated always as identity,
titel varchar(50) not null,
laenge integer not null check(laenge>0),
erscheinungsjahr integer not null check(erscheinungsjahr>1900 and erscheinungsjahr<2021),
gid integer not null,
fsk integer not null check(fsk in (0,6,12,16,18))

);


create table kunde(
kid integer primary key generated always as identity,
vorname varchar(50) not null,
nachname varchar(50) not null,
straÃŸe varchar(50) not null,
hausnummer varchar(50) not null,
plz varchar(50) not null,
kontonr varchar(50) not null,
email varchar(50) not null,
passwort varchar(50) not null
);

create table dvd_kunde(
did integer,
kid integer,
ausgeliehen date not null,
primary key (did, kid, ausgeliehen),
zurueck date
);

create table genre(
gid integer primary key generated always as identity,
name varchar(50) not null
);


create table sprache(
sid integer primary key generated always as identity,
name varchar(50) not null
);

create table dvd_sprache(
did integer not null,
sid integer not null,
primary key(did, sid)
);

insert into sprache (name) values('deutsch');
insert into sprache (name) values('englisch');
insert into sprache (name) values('spanisch');

insert into kunde (vorname, nachname, strasse, hausnummer, plz, kontonr, email, passwort) 
values ('Hans', 'Meier', 'Schulgasse', '23', '56723', 'DE123456789', 'hans@meier.de', '123');
insert into kunde (vorname, nachname, strasse, hausnummer, plz, kontonr, email, passwort) 
values ('Peter', 'Huber', 'Bahnhofplatz', '4', '81465', 'DE987654321', 'peter@huber.de', '123');

insert into genre (name) values ('Horror');
insert into genre (name) values ('Sci-Fi');
insert into genre (name) values ('KomÃ¶die');
insert into genre (name) values ('Drama');

insert into dvd (titel, laenge, erscheinungsjahr, gid, fsk)
values('Psycho', 99, 1998, 1, 12);
insert into dvd (titel, laenge, erscheinungsjahr, gid, fsk)
values('Titanic', 194, 1997, 4, 12);

insert into dvd_sprache values(1,1);
insert into dvd_sprache values(1,2);
insert into dvd_sprache values(2,1);
insert into dvd_sprache values(2,2);
insert into dvd_sprache values(2,3);

insert into dvd_kunde values(1,1,'2020-05-06', null);
insert into dvd_kunde values(1,1,'2019-05-06', '2020-01-01');
insert into dvd_kunde values(1,1,'2020-03-23', '2020-04-16');
insert into dvd_kunde values(2,1,'2020-05-04', '2020-05-06');